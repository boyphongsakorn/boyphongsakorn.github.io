<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PWisetthon</title>
    <meta name="google-adsense-account" content="ca-pub-9734327609923498">
    <script defer src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-50">
    <div class="max-w-4xl mx-auto px-4 py-8">
        <h1 class="text-3xl font-bold mb-2 text-gray-800">PWisetthon</h1>
        <p class="text-gray-600 mb-6">ขี้เกียจทำละเว็บ กดตาม ul list ข้างล่างละกัน</p>
        
        <ul class="space-y-3">
            <li id="twitchbanneralert" class="hidden">
                <a href="https://www.twitch.tv/boyalone99" target="_blank" rel="noopener noreferrer" class="lazy block p-4 rounded-lg shadow-sm hover:shadow-md transition-all duration-200 border border-gray-200 bg-cover bg-center" data-bg="https://img.gs/fhcphvsghs/quality=low/https://static-cdn.jtvnw.net/previews-ttv/live_user_boyalone99-1280x720.jpg" style="background-color: rgba(255, 255, 255, 0.9); backdrop-filter: blur(2px);">
                    <img class="w-10 h-10 rounded-full inline mr-2" src="https://upload.wikimedia.org/wikipedia/commons/4/41/Red_circle.gif" alt="Live indicator">
                    <span class="text-blue-600 font-medium">กำลังไลฟ์ อยู่บน Twitch - ดูเลย!</span>
                </a>
            </li>
            <li><a href="https://store.line.me/themeshop/product/2e590572-878f-484e-a4d6-6c6cff4a55fb/th" class="block p-4 bg-white rounded-lg shadow-sm hover:shadow-md hover:bg-gray-50 transition-all duration-200 border border-gray-200">
                <span class="text-blue-600 font-medium">ธีมไลน์ง่ายดี (ธีมมืด)</span>
            </a></li>
            <li id="twitchregularlink"><a href="https://www.twitch.tv/boyalone99" class="block p-4 bg-white rounded-lg shadow-sm hover:shadow-md hover:bg-gray-50 transition-all duration-200 border border-gray-200">
                <span class="text-blue-600 font-medium">Twitch.tv</span>
            </a></li>
            <li><a href="https://www.fortnite.com/@boyalone99" class="block p-4 bg-white rounded-lg shadow-sm hover:shadow-md hover:bg-gray-50 transition-all duration-200 border border-gray-200">
                <span class="text-blue-600 font-medium">Fortnite Creator</span>
            </a></li>
            <li><a href="https://play.google.com/store/apps/details?id=com.wrblob" class="block p-4 bg-white rounded-lg shadow-sm hover:shadow-md hover:bg-gray-50 transition-all duration-200 border border-gray-200">
                <span class="text-blue-600 font-medium">อยากรวย แต่มีแต่รายจ่าย</span>
            </a></li>
            <li><a href="https://bpminecraft.com" class="block p-4 bg-white rounded-lg shadow-sm hover:shadow-md hover:bg-gray-50 transition-all duration-200 border border-gray-200">
                <span class="text-blue-600 font-medium">BP Minecraft</span>
            </a></li>
            <li><a href="https://mccplog.pwisetthon.com" class="block p-4 bg-white rounded-lg shadow-sm hover:shadow-md hover:bg-gray-50 transition-all duration-200 border border-gray-200">
                <span class="text-blue-600 font-medium">Log เซิฟเวอร์ Minecraft</span>
            </a></li>
            <li><a href="https://bussy.pwisetthon.com" class="block p-4 bg-white rounded-lg shadow-sm hover:shadow-md hover:bg-gray-50 transition-all duration-200 border border-gray-200">
                <span class="text-blue-600 font-medium">Bussy (เว็บรวมตารางงาน)</span>
            </a></li>
            <li><a href="https://send.pwisetthon.com" class="block p-4 bg-white rounded-lg shadow-sm hover:shadow-md hover:bg-gray-50 transition-all duration-200 border border-gray-200">
                <span class="text-blue-600 font-medium">Send (เว็บฝากไฟล์ชั่วคราว)</span>
            </a></li>
            <li><a href="https://discordbot.pwisetthon.com" class="block p-4 bg-white rounded-lg shadow-sm hover:shadow-md hover:bg-gray-50 transition-all duration-200 border border-gray-200">
                <span class="text-blue-600 font-medium">Discord Bot</span>
            </a></li>
            <li><a href="https://www.battlemetrics.com/servers/palworld/33185507" class="block p-4 bg-white rounded-lg shadow-sm hover:shadow-md hover:bg-gray-50 transition-all duration-200 border border-gray-200">
                <span class="text-blue-600 font-medium">Free Palworld Server</span>
            </a></li>
            <li><a href="https://mkrm.pwisetthon.com" class="block p-4 bg-white rounded-lg shadow-sm hover:shadow-md hover:bg-gray-50 transition-all duration-200 border border-gray-200">
                <span class="text-blue-600 font-medium">Project สแกนเพิ่ม Playlist เพลง</span>
            </a></li>
        </ul>

        <!-- Steam Wishlist Section -->
        <div id="steamWishlistSection" class="mt-8">
            <h2 class="text-2xl font-bold mb-4 text-gray-800">Steam Wishlist</h2>
            <div id="steamWishlistLoading" class="text-gray-600">Loading wishlist...</div>
            <div id="steamWishlistError" class="hidden text-red-600"></div>
            <div id="steamWishlistContent" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"></div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload@17.8.8/dist/lazyload.min.js"></script>

    <script defer>
        const lazyLoadInstance = new LazyLoad({
            elements_selector: ".lazy"
        });

        //fetch https://localpost.teamquadb.in.th/twitchstatus and if text is not "offline" then show the list item
        fetch('https://localpost.teamquadb.in.th/twitchstatus')
            .then(response => response.text())
            .then(data => {
                if (data != "offline") {
                    // remove class hidden from Twitch banner list item
                    document.getElementById("twitchbanneralert").classList.remove("hidden");
                    // hide the regular Twitch link when live banner is shown
                    document.getElementById("twitchregularlink").style.display = "none";
                }
            })
            .catch(error => {
                // Silently fail - banner remains hidden if API is unavailable
                console.error('Error fetching Twitch status:', error);
            });

        // Steam Wishlist Functionality
        async function fetchSteamWishlist() {
            const steamId = 'pwisetthon'; // Steam custom URL ID
            const loadingEl = document.getElementById('steamWishlistLoading');
            const errorEl = document.getElementById('steamWishlistError');
            const contentEl = document.getElementById('steamWishlistContent');

            try {
                // Fetch wishlist data from Steam
                const response = await fetch(`https://store.steampowered.com/wishlist/id/${steamId}/wishlistdata/`);
                
                if (!response.ok) {
                    throw new Error('Failed to fetch wishlist');
                }

                const wishlistData = await response.json();
                
                // Hide loading message
                loadingEl.style.display = 'none';

                // Check if wishlist is empty
                if (!wishlistData || Object.keys(wishlistData).length === 0) {
                    contentEl.innerHTML = '<p class="text-gray-600">No games in wishlist</p>';
                    return;
                }

                // Display wishlist games
                const games = Object.entries(wishlistData).slice(0, 12); // Show first 12 games
                
                games.forEach(([appId, gameData]) => {
                    const gameCard = document.createElement('div');
                    gameCard.className = 'bg-white rounded-lg shadow-sm hover:shadow-md transition-all duration-200 border border-gray-200 overflow-hidden';
                    
                    // Create link element
                    const link = document.createElement('a');
                    link.href = `https://store.steampowered.com/app/${encodeURIComponent(appId)}`;
                    link.target = '_blank';
                    link.rel = 'noopener noreferrer';
                    link.className = 'block';
                    
                    // Create and add image
                    const img = document.createElement('img');
                    img.src = gameData.capsule || '';
                    img.alt = gameData.name || 'Game';
                    img.className = 'w-full h-40 object-cover';
                    img.onerror = function() { this.style.display = 'none'; };
                    link.appendChild(img);
                    
                    // Create content div
                    const contentDiv = document.createElement('div');
                    contentDiv.className = 'p-3';
                    
                    // Create title
                    const title = document.createElement('h3');
                    title.className = 'font-medium text-gray-800 mb-1 truncate';
                    title.textContent = gameData.name || 'Unknown Game';
                    contentDiv.appendChild(title);
                    
                    // Create price element
                    const priceP = document.createElement('p');
                    if (gameData.subs && gameData.subs.length > 0) {
                        priceP.className = 'text-sm text-green-600 font-semibold';
                        const price = (gameData.subs[0].price / 100).toFixed(2);
                        const discount = gameData.subs[0].discount_pct || 0;
                        priceP.textContent = discount > 0 ? `-${discount}% $${price}` : `$${price}`;
                    } else {
                        priceP.className = 'text-sm text-gray-500';
                        priceP.textContent = 'Price not available';
                    }
                    contentDiv.appendChild(priceP);
                    
                    link.appendChild(contentDiv);
                    gameCard.appendChild(link);
                    contentEl.appendChild(gameCard);
                });

            } catch (error) {
                console.error('Error fetching Steam wishlist:', error);
                loadingEl.style.display = 'none';
                errorEl.textContent = 'Unable to load Steam wishlist. Please try again later.';
                errorEl.classList.remove('hidden');
            }
        }

        // Load Steam wishlist when page loads
        fetchSteamWishlist();
    </script>
</body>
</html>
